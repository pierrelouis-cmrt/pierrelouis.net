const themeRoot=document.documentElement,themeQuery=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{matches:!1},themeStorageKey="theme",themeColors={dark:"#0f0f0f",light:"#faf9f9"},themeStorage={get(s){try{return localStorage.getItem(s)}catch(r){return null}},set(s,r){try{localStorage.setItem(s,r)}catch(e){}},remove(s){try{localStorage.removeItem(s)}catch(r){}}},setThemeColorContent=s=>{const r=document.querySelectorAll('meta[name="theme-color"]');if(r.length===0){const e=document.createElement("meta");e.name="theme-color",e.content=s,document.head.appendChild(e);return}r.forEach(e=>e.setAttribute("content",s))},applyBaseThemeColor=()=>{const s=themeRoot.classList.contains("dark");setThemeColorContent(s?themeColors.dark:themeColors.light)},updateThemeColor=()=>{const s=window.__overlayChromeController;if(s&&typeof s.hasActiveOverlays=="function"&&s.hasActiveOverlays()){s.updateThemeColor();return}applyBaseThemeColor()},onThemeQueryChange=s=>{themeQuery&&(typeof themeQuery.addEventListener=="function"?themeQuery.addEventListener("change",s):typeof themeQuery.addListener=="function"&&themeQuery.addListener(s))},lockScrollDuring=s=>{const r=window.scrollX,e=window.scrollY;s(),(window.scrollX!==r||window.scrollY!==e)&&window.scrollTo(r,e)};window.__scrollManager={lockDuring:lockScrollDuring},(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual");const s="scrollPositions";let r={};try{const i=sessionStorage.getItem(s);i&&(r=JSON.parse(i))}catch(i){}const e=()=>{try{sessionStorage.setItem(s,JSON.stringify(r))}catch(i){}},t=()=>window.location.href,o=()=>{r[t()]={x:window.scrollX,y:window.scrollY},e()};window.addEventListener("popstate",()=>{const i=t(),a=r[i];a&&requestAnimationFrame(()=>{window.scrollTo(a.x,a.y)})}),window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o);let n=null;window.addEventListener("scroll",()=>{n&&clearTimeout(n),n=setTimeout(o,150)},{passive:!0}),setInterval(o,5e3)})();const applyThemeToRoot=s=>{const r=s==="dark"||s==="system"&&themeQuery.matches;themeRoot.classList.toggle("dark",r),updateThemeColor()},persistTheme=s=>{s==="system"?themeStorage.remove(themeStorageKey):themeStorage.set(themeStorageKey,s)},loadStoredTheme=()=>{const s=themeStorage.get(themeStorageKey);return s==="dark"||s==="light"?s:"system"};document.addEventListener("alpine:init",()=>{const s=(r,e,t=!1)=>{const o=()=>{applyThemeToRoot(e),persistTheme(e),r.mode=e,syncIframeTheme(e)};t?o():lockScrollDuring(o)};Alpine.store("theme",{mode:"system",init(){s(this,loadStoredTheme(),!0),onThemeQueryChange(()=>{this.mode==="system"&&s(this,"system")})},set(r){s(this,r)},toggle(){const r=this.mode==="system"?"light":this.mode==="light"?"dark":"system";this.set(r),window.umami&&typeof window.umami.track=="function"&&window.umami.track("Theme toggle",{mode:r})},dark(){this.set("dark")},light(){this.set("light")},system(){this.set("system")}})});function syncIframeTheme(s){document.querySelectorAll("iframe.article-embed").forEach(e=>{if(!e.contentWindow){e.addEventListener("load",()=>syncSingleIframe(e,s));return}syncSingleIframe(e,s)})}function syncSingleIframe(s,r){const e=s.contentWindow.document.documentElement;e.classList.remove("dark","light"),r==="dark"?e.classList.add("dark"):r==="light"?e.classList.add("light"):r==="system"&&(themeQuery.matches||e.classList.add("light"));const t=s.contentWindow.document.body;t.style.transition="background-color 0.3s ease, color 0.3s ease",setTimeout(()=>{t.style.transition=""},300)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("iframe.article-embed").forEach(s=>{s.addEventListener("load",()=>{syncIframeTheme(Alpine.store("theme").mode)})})}),document.addEventListener("DOMContentLoaded",function(){const s={root:null,rootMargin:"0px",threshold:.1},r=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("visible"),r.unobserve(t.target))})},s);document.querySelectorAll(".animate-on-scroll").forEach(e=>{r.observe(e)})}),window.COMMAND_ITEMS_DATA={pages:[{title:"Home",value:"home",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house w-4 h-4 mr-1 sm:mr-2"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>',right:"N + H",default:!0},{title:"About me (Who am I?)",value:"about",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user w-4 h-4 mr-1 sm:mr-2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',right:"N + A",default:!0},{title:"My Projects (What have I been working on?)",value:"projects",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase w-4 h-4 mr-1 sm:mr-2"><rect width="20" height="14" x="2" y="7" rx="2" /><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" /></svg>',right:"N + P",default:!0},{title:"Now (What am I upto at the moment?)",value:"now",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock3-icon lucide-clock-3 w-4 h-4 mr-1 sm:mr-2"><path d="M12 6v6h4"/><circle cx="12" cy="12" r="10"/></svg>',right:"N + K",default:!0},{title:"Someday (Someday I will...)",value:"someday",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hourglass-icon lucide-hourglass w-4 h-4 mr-1 sm:mr-2"><path d="M5 22h14"/><path d="M5 2h14"/><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/></svg>',right:"N + S",default:!0},{title:"Writing (All my posts, kinda my personnal blog)",value:"writing",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-pen-icon lucide-notebook-pen w-4 h-4 mr-1 sm:mr-2"><path d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"/><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><path d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/></svg>',right:"N + W",default:!0},{title:"Uses (My toolkit, tech stacks...)",value:"uses",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-drafting-compass w-4 h-4 mr-1 sm:mr-2"><path d="m12.99 6.74 1.93 3.44"/><path d="M19.136 12a10 10 0 0 1-14.271 0"/><path d="m21 21-2.16-3.84"/><path d="m3 21 8.02-14.26"/><circle cx="12" cy="5" r="2"/></svg>',right:"N + U",default:!0},{title:"Photos (Some of my best shots)",value:"photos",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-camera-icon lucide-camera w-4 h-4 mr-1 sm:mr-2"><path d="M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"/><circle cx="12" cy="13" r="3"/></svg>',right:"N + G",default:!0},{title:"Bookmarks (Interestings posts, videos and useful websites)",value:"bookmarks",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bookmark-icon lucide-bookmark w-4 h-4 mr-1 sm:mr-2"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/></svg>',right:"N + B",default:!0},{title:"Colophon (What's this all about?)",value:"colophon",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code-xml w-4 h-4 mr-1 sm:mr-2"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>',right:"N + C",default:!0}],network:[{title:"Links (My socials)",value:"links",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link w-4 h-4 mr-1 sm:mr-2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',right:"N + L",default:!0},{title:"Send me an email",value:"email",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-at-sign w-4 h-4 mr-1 sm:mr-2"><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8"/></svg>',right:"N + E",default:!0}],settings:[{title:"Toggle Theme",value:"theme",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paintbrush-vertical w-4 h-4 mr-1 sm:mr-2"><path d="M10 2v2"/><path d="M14 2v4"/><path d="M17 2a1 1 0 0 1 1 1v9H6V3a1 1 0 0 1 1-1z"/><path d="M6 12a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2h2a1 1 0 0 1 1 1v2.9a2 2 0 1 0 4 0V17a1 1 0 0 1 1-1h2a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1"/></svg>',right:"N + T",default:!0}],articles:[],notes:[],experiments:[]},window.COMMAND_ACTION_MAP={home:"/",about:"/about/",projects:"/projects/",now:"/now/",someday:"/someday/",writing:"/posts/",uses:"/uses/",photos:"/photos/",bookmarks:"/bookmarks/",colophon:"/colophon/",links:"/links/",email:"mailto:contact@pierrelouis.net?subject=Just%20wanted%20to%20say%20hi"},window.SHORTCUT_MAP={h:"/",a:"/about/",p:"/projects/",k:"/now/",s:"/someday/",w:"/posts/",b:"/bookmarks/",u:"/uses/",g:"/photos/",c:"/colophon/",l:"/links/",e:"mailto:contact@pierrelouis.net?subject=Hi,%20I'm%20....%20and...%20"};const COMMAND_POST_CATEGORY_MAP={Articles:{key:"articles"},Notes:{key:"notes"},Experiments:{key:"experiments"}},COMMAND_POST_ICONS={Articles:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-pen w-4 h-4 mr-1 sm:mr-2"><path d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"/><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><path d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/></svg>',Notes:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sticky-note w-4 h-4 mr-1 sm:mr-2"><path d="M15 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9Z"/><path d="M15 2v6a2 2 0 0 0 2 2h6"/><path d="M9 10h6"/><path d="M9 14h6"/></svg>',Experiments:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flask-conical w-4 h-4 mr-1 sm:mr-2"><path d="M10 2v6a2 2 0 0 1-.3 1.05L4.3 18.9A2 2 0 0 0 6.03 22h11.94a2 2 0 0 0 1.73-3.1l-5.4-9.85A2 2 0 0 1 14 8V2"/><path d="M14 16h-4"/><path d="M14 12h-4"/></svg>'};(()=>{const s="/posts/posts.json",r=()=>new Date,e=a=>a?new Date(`${a} 1 2000`).getMonth():NaN,t=a=>a.toLowerCase().replace(/[^a-z0-9 _-]/g,"").trim().replace(/\s+/g,"-"),o=()=>{Object.values(COMMAND_POST_CATEGORY_MAP).forEach(({key:a})=>{Array.isArray(window.COMMAND_ITEMS_DATA[a])||(window.COMMAND_ITEMS_DATA[a]=[])})},n=a=>{o();const d=r(),h=[];[...a].sort((c,m)=>(m.year||0)-(c.year||0)||e(m.month)-e(c.month)||(m.day||0)-(c.day||0)).forEach(c=>{if(!c||!c.title||!c.tag)return;const m=COMMAND_POST_CATEGORY_MAP[c.tag];if(!m)return;const{key:v}=m,p=t(c.title),w=`post-${v}-${p}`;if(window.COMMAND_ACTION_MAP[w])return;const g=new Date(`${c.month||"Jan"} ${c.day||1} ${c.year||d.getFullYear()}`);if(Number.isNaN(g)||g>d)return;const y=COMMAND_POST_ICONS[c.tag]||COMMAND_POST_ICONS.Articles,l=`/posts/${p}.html`,u=c.month&&c.year?`${c.month} ${c.year}`:void 0,k={title:c.title,value:w,icon:y,default:!1};u&&(k.right=u),window.COMMAND_ITEMS_DATA[v].push(k),window.COMMAND_ACTION_MAP[w]=l,h.push(k)}),h.length>0&&window.dispatchEvent(new CustomEvent("command-palette-data-updated",{detail:{source:"posts",count:h.length}}))};let i=null;window.loadCommandPalettePosts=()=>i||(i=fetch(s,{credentials:"same-origin"}).then(a=>{if(!a.ok)throw new Error(`Failed to load posts.json: ${a.status}`);return a.json()}).then(a=>{Array.isArray(a)&&n(a)}).catch(a=>{console.error("[CommandPalette] Unable to load posts JSON",a)}),i),window.loadCommandPalettePosts()})(),document.addEventListener("keydown",s=>{if((s.ctrlKey||s.metaKey)&&s.key.toLowerCase()==="k"){if(window.innerWidth<768)return;s.preventDefault(),window.dispatchEvent(new CustomEvent("open-command-palette"))}}),(()=>{let s=!1,r=null;const e=1500,t=()=>{const i=document.activeElement;return i&&(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)},o=()=>{s=!1,r&&clearTimeout(r),r=null},n=()=>{r&&clearTimeout(r),r=setTimeout(o,e)};document.addEventListener("keydown",i=>{var d,h;const a=i.key.toLowerCase();if(!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey&&a==="n"){if(t())return;s=!0,n(),i.preventDefault();return}if(s&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey){if(t())return o();if(i.repeat)return;if(a==="t"){i.preventDefault(),(d=document.querySelector("button.theme-toggle"))==null||d.click(),n();return}const f=(h=window.SHORTCUT_MAP)==null?void 0:h[a];f&&(i.preventDefault(),window.location.href=f)}},{capture:!0}),document.addEventListener("keyup",i=>{i.key.toLowerCase()==="n"&&o()}),window.addEventListener("blur",o),document.addEventListener("visibilitychange",()=>{document.hidden&&o()})})(),(()=>{const s=document.querySelector("[data-back-to-top]");if(!s)return;const r=window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,e="scrollBehavior"in document.documentElement.style,t=()=>{const o=window.pageYOffset||document.documentElement.scrollTop||0;if(o===0||!window.requestAnimationFrame){window.scrollTo(0,0);return}const n=Math.min(600,Math.max(250,o/2)),i=window.performance&&performance.now||Date.now(),a=h=>1-Math.pow(1-h,3),d=h=>{const f=h-i,c=Math.min(1,f/n),m=a(c),v=Math.round(o*(1-m));window.scrollTo(0,v),c<1&&requestAnimationFrame(d)};requestAnimationFrame(d)};s.addEventListener("click",o=>{if(o.preventDefault(),r&&r.matches){window.scrollTo(0,0);return}if(e){window.scrollTo({top:0,behavior:"smooth"});return}t()},{passive:!1})})(),(()=>{const s=document.documentElement,r=document.body,e=200,t={dark:"#0f0f0f",light:"#faf9f9"},o={overlay:t,drawer:t,lightbox:{dark:"#14161d",light:"#e4e3e1"}},n={stack:[],resetTimer:null,observer:null,mediaQuery:null,mediaHandler:null,bodySnapshot:null,bodyLocked:!1},i=l=>o[l]||t,a=l=>(l||i(n.stack[n.stack.length-1]||"overlay"))[s.classList.contains("dark")?"dark":"light"],d=()=>setThemeColorContent(a()),h=()=>{d(),requestAnimationFrame(d),setTimeout(d,60)},f=()=>{n.resetTimer&&(clearTimeout(n.resetTimer),n.resetTimer=null)},c=()=>{n.resetTimer=setTimeout(()=>{applyBaseThemeColor(),n.resetTimer=null},e)},m=()=>{if(n.observer||(n.observer=new MutationObserver(h)),n.observer.observe(s,{attributes:!0,attributeFilter:["class"]}),!n.mediaQuery&&window.matchMedia)try{n.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)")}catch(l){n.mediaQuery=null}if(n.mediaQuery&&!n.mediaHandler){const l=n.mediaQuery,u=n.mediaHandler=h;typeof l.addEventListener=="function"?l.addEventListener("change",u):typeof l.addListener=="function"&&l.addListener(u)}},v=()=>{var l;if((l=n.observer)==null||l.disconnect(),n.mediaQuery&&n.mediaHandler){const u=n.mediaQuery;typeof u.removeEventListener=="function"?u.removeEventListener("change",n.mediaHandler):typeof u.removeListener=="function"&&u.removeListener(n.mediaHandler),n.mediaHandler=null}},p=()=>{!r||n.bodyLocked||(n.bodyLocked=!0,n.bodySnapshot={htmlOverflow:s.style.overflow,bodyOverflow:r.style.overflow},s.style.overflow="hidden",r.style.overflow="hidden")},w=()=>{if(!r||!n.bodyLocked)return;const l=n.bodySnapshot;s.style.overflow=(l==null?void 0:l.htmlOverflow)||"",r.style.overflow=(l==null?void 0:l.bodyOverflow)||"",n.bodySnapshot=null,n.bodyLocked=!1},g=l=>{if(!n.stack.length)return;if(!l){n.stack.pop();return}const u=n.stack.lastIndexOf(l);if(u===-1){n.stack.pop();return}n.stack.splice(u,1)},y={open(l="overlay"){f(),n.stack.length||(p(),m()),n.stack.push(l),h()},close(l="overlay"){if(n.stack.length){if(f(),g(l),n.stack.length){h();return}v(),c(),w()}},updateThemeColor:h,resetThemeColor(){f(),applyBaseThemeColor()},getColorFor(l,u){return i(l)[u?"dark":"light"]},hasActiveOverlays(){return n.stack.length>0}};window.__overlayChromeController=y})(),(()=>{class s{constructor(e){this.overlay=e,this.shell=e.querySelector(".image-lightbox__shell"),this.imageEl=e.querySelector("[data-lightbox-active-image]"),this.captionEl=e.querySelector("[data-lightbox-caption]"),this.thumbnailsEl=e.querySelector("[data-lightbox-thumbnails]"),this.closeButtons=e.querySelectorAll("[data-lightbox-close]"),this.prevButton=e.querySelector("[data-lightbox-prev]"),this.nextButton=e.querySelector("[data-lightbox-next]"),this.groups=new Map,this.thumbnailButtons=[],this.preloaded=new Set,this._navLock=!1;const t=window.location.pathname.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");this.defaultGroupId=t?`page-${t}`:"page-root",this.activeGroupId=null,this.activeItems=[],this.activeIndex=0,this.lastFocused=null,this.boundHandlers=!1,this.themeObserver=null,this.prefersDarkMedia=null,this.mediaListenerAttached=!1,this.boundMediaChange=null,this.themeTimer=null,this.themeResetDelay=200,this.shell&&!this.shell.hasAttribute("tabindex")&&this.shell.setAttribute("tabindex","-1")}init(){!this.overlay||!this.imageEl||(this.collectItems(),this.groups.size!==0&&this.bindControls())}collectItems(){Array.from(document.querySelectorAll("[data-lightbox-item]")).forEach(t=>{if(!t||t.dataset.lightboxReady==="true")return;const o=this.resolveGroupId(t);this.groups.has(o)||this.groups.set(o,[]);const n=this.groups.get(o),i={element:t,groupId:o,getSource:()=>t.dataset.lightboxSrc||t.currentSrc||t.src,getThumb:()=>t.dataset.lightboxThumb||t.currentSrc||t.src,getCaption:()=>t.dataset.lightboxCaption||t.getAttribute("alt")||""};i.index=n.length,n.push(i),t.dataset.lightboxReady="true",t.dataset.lightboxGroupResolved=o,t.dataset.lightboxIndex=String(i.index),t.hasAttribute("tabindex")||(t.tabIndex=0);const a=d=>{d.preventDefault(),this.open(o,i.index)};t.addEventListener("click",a),t.addEventListener("keydown",d=>{if(d.defaultPrevented)return;const h=d.key;(h==="Enter"||h===" "||h==="Space"||h==="Spacebar")&&a(d)})})}resolveGroupId(e){const t=(e.dataset.lightboxGroup||"").trim();if(t)return t;const o=e.closest("[data-lightbox-group]");return o&&o.dataset.lightboxGroup?o.dataset.lightboxGroup:this.defaultGroupId}bindControls(){var e,t;this.closeButtons.forEach(o=>{o.addEventListener("click",n=>{n.preventDefault(),this.close()})}),(e=this.prevButton)==null||e.addEventListener("click",o=>{o.preventDefault(),this.showPrevious()}),(t=this.nextButton)==null||t.addEventListener("click",o=>{o.preventDefault(),this.showNext()})}open(e,t=0){this.collectItems();const o=this.groups.get(e);if(!o||o.length===0)return;this.activeGroupId=e,this.activeItems=o,this.activeIndex=this.normalizeIndex(t),this.lastFocused=document.activeElement,this._navLock=!1,this.overlay.classList.add("is-active"),this.overlay.setAttribute("aria-hidden","false"),document.body.classList.add("lightbox-open");const n=window.__overlayChromeController;n&&typeof n.open=="function"?n.open("lightbox"):(this.clearThemeTimer(),this.updateThemeColor(),this.startThemeWatchers()),this.buildThumbnails(),this.showIndex(this.activeIndex,{focusThumbnail:!1}),this.attachGlobalHandlers(),this.focusPrimaryControl()}showIndex(e,{focusThumbnail:t=!0}={}){if(!this.activeItems||this.activeItems.length===0){this._navLock=!1;return}this.activeIndex=this.normalizeIndex(e),this.renderActiveItem(),this.updateControls(),this.updateThumbnails({focusCurrent:t}),this.preloadAdjacent(),this._navLock=!1}showNext(e={}){this._navLock||(this._navLock=!0,this.showIndex(this.activeIndex+1,e))}showPrevious(e={}){this._navLock||(this._navLock=!0,this.showIndex(this.activeIndex-1,e))}normalizeIndex(e){if(!this.activeItems||this.activeItems.length===0)return 0;const t=this.activeItems.length;return(e%t+t)%t}renderActiveItem(){const e=this.activeItems[this.activeIndex];if(!e)return;const t=e.getSource();t&&this.imageEl.src!==t&&(this.imageEl.src=t);const o=e.getCaption().trim();this.imageEl.alt=o,this.captionEl&&(o?(this.captionEl.textContent=o,this.captionEl.hidden=!1):(this.captionEl.textContent="",this.captionEl.hidden=!0))}updateControls(){const e=this.activeItems.length>1;this.overlay.classList.toggle("lightbox--single",!e),this.prevButton&&(this.prevButton.disabled=!e,this.prevButton.hidden=!e),this.nextButton&&(this.nextButton.disabled=!e,this.nextButton.hidden=!e),this.thumbnailsEl&&(e?this.thumbnailsEl.hidden=!1:this.thumbnailsEl.hidden=!0)}buildThumbnails(){if(this.thumbnailsEl){if(this.thumbnailsEl.innerHTML="",this.thumbnailButtons=[],!this.activeItems||this.activeItems.length<=1){this.thumbnailsEl.hidden=!0;return}this.thumbnailsEl.hidden=!1,this.activeItems.forEach((e,t)=>{const o=document.createElement("button");o.type="button",o.className="image-lightbox__thumbnail",o.setAttribute("data-index",String(t)),o.setAttribute("role","listitem");const n=document.createElement("img");n.loading="lazy",n.decoding="async";const i=e.getThumb();i&&(n.src=i);const a=e.getCaption().trim();n.alt=a?`${a} thumbnail`:`Image ${t+1}`,o.appendChild(n),o.addEventListener("click",d=>{d.preventDefault(),this.showIndex(t,{focusThumbnail:!1})}),this.thumbnailsEl.appendChild(o),this.thumbnailButtons.push(o)})}}updateThumbnails({focusCurrent:e=!1}={}){this.thumbnailButtons.length&&this.thumbnailButtons.forEach((t,o)=>{o===this.activeIndex?(t.classList.add("is-active"),e&&t.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})})):t.classList.remove("is-active")})}preloadAdjacent(){if(!this.activeItems||this.activeItems.length<=1)return;const e=this.activeItems.length;[(this.activeIndex+1)%e,(this.activeIndex-1+e)%e].forEach(o=>{const n=this.activeItems[o];if(!n)return;const i=n.getSource();if(!i||this.preloaded.has(i))return;this.preloaded.add(i);const a=new Image;a.src=i})}close(){if(!this.overlay.classList.contains("is-active"))return;this.overlay.classList.remove("is-active"),this.overlay.classList.remove("lightbox--single"),this.overlay.setAttribute("aria-hidden","true"),document.body.classList.remove("lightbox-open");const e=window.__overlayChromeController;e&&typeof e.close=="function"&&e.hasActiveOverlays&&e.hasActiveOverlays()?e.close("lightbox"):(this.stopThemeWatchers(),this.scheduleThemeReset()),this._navLock=!1,this.detachGlobalHandlers(),this.thumbnailsEl&&(this.thumbnailsEl.hidden=!0),this.activeGroupId=null,this.activeItems=[],this.activeIndex=0;const o=this.lastFocused;this.lastFocused=null,o&&typeof o.focus=="function"&&setTimeout(()=>o.focus(),0)}attachGlobalHandlers(){this.boundHandlers||(this.keydownHandler=e=>this.onKeydown(e),this.focusHandler=e=>this.handleFocusIn(e),document.addEventListener("keydown",this.keydownHandler),document.addEventListener("focusin",this.focusHandler),this.boundHandlers=!0)}detachGlobalHandlers(){this.boundHandlers&&(this.keydownHandler&&document.removeEventListener("keydown",this.keydownHandler),this.focusHandler&&document.removeEventListener("focusin",this.focusHandler),this.boundHandlers=!1)}onKeydown(e){if(this.overlay.classList.contains("is-active"))switch(e.key){case"Escape":e.preventDefault(),this.close();break;case"ArrowRight":e.preventDefault(),this.showNext({focusThumbnail:!1});break;case"ArrowLeft":e.preventDefault(),this.showPrevious({focusThumbnail:!1});break;case"Home":e.preventDefault(),this.showIndex(0,{focusThumbnail:!1});break;case"End":e.preventDefault(),this.showIndex(this.activeItems.length-1,{focusThumbnail:!1});break;default:break}}handleFocusIn(e){this.overlay.classList.contains("is-active")&&this.shell&&(this.shell.contains(e.target)||this.focusPrimaryControl())}focusPrimaryControl(){var t;const e=((t=this.closeButtons)==null?void 0:t[0])||this.shell;e&&typeof e.focus=="function"&&e.focus({preventScroll:!0})}updateThemeColor(){const e=document.documentElement.classList.contains("dark"),t=window.__overlayChromeController;if(t&&typeof t.getColorFor=="function"){setThemeColorContent(t.getColorFor("lightbox",e));return}setThemeColorContent(e?"#14161d":"#e4e3e1")}resetThemeColor(){applyBaseThemeColor()}startThemeWatchers(){if(this.themeObserver||(this.themeObserver=new MutationObserver(()=>this.updateThemeColor()),this.themeObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})),this.boundMediaChange||(this.boundMediaChange=()=>this.updateThemeColor()),!this.prefersDarkMedia&&window.matchMedia)try{this.prefersDarkMedia=window.matchMedia("(prefers-color-scheme: dark)")}catch(e){this.prefersDarkMedia=null}if(this.prefersDarkMedia&&!this.mediaListenerAttached){const e=this.prefersDarkMedia;typeof e.addEventListener=="function"?(e.addEventListener("change",this.boundMediaChange),this.mediaListenerAttached=!0):typeof e.addListener=="function"&&(e.addListener(this.boundMediaChange),this.mediaListenerAttached=!0)}}stopThemeWatchers(){if(this.themeObserver&&(this.themeObserver.disconnect(),this.themeObserver=null),this.prefersDarkMedia&&this.mediaListenerAttached){const e=this.prefersDarkMedia;typeof e.removeEventListener=="function"?e.removeEventListener("change",this.boundMediaChange):typeof e.removeListener=="function"&&e.removeListener(this.boundMediaChange),this.mediaListenerAttached=!1}}clearThemeTimer(){this.themeTimer&&(clearTimeout(this.themeTimer),this.themeTimer=null)}scheduleThemeReset(){this.clearThemeTimer(),this.themeTimer=setTimeout(()=>{this.resetThemeColor(),this.themeTimer=null},this.themeResetDelay)}}document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("lightbox");if(!r)return;new s(r).init()})})(),document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".tech-stack-sections");if(!s)return;const r=Array.from(s.querySelectorAll(".tech-stack-items img"));if(r.length===0)return;document.documentElement.classList.add("uses-icons-fade");const t=o=>{o.classList.remove("uses-icon-loading"),o.classList.add("uses-icon-loaded")};r.forEach(o=>{if(o.classList.add("uses-icon-loading"),o.complete&&o.naturalWidth>0){t(o);return}o.addEventListener("load",()=>t(o),{once:!0}),o.addEventListener("error",()=>t(o),{once:!0})}),window.setTimeout(()=>{r.forEach(o=>t(o))},800)}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".article-footnote-ref").forEach(e=>{var a;const t=e.querySelector("a[href^='#fn']");if(!t)return;const o=(a=t.getAttribute("href"))==null?void 0:a.match(/^#fn(.+)$/);if(!o)return;const i=`fnref${o[1]}`;e.id||(e.id=i)}),document.querySelectorAll(".article-footnote-backref").forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href");if(!o)return;const n=o.replace("#",""),i=document.getElementById(n);if(!i)return;t.preventDefault();const a=i.getBoundingClientRect().top+window.pageYOffset-100;try{window.scrollTo({top:a,behavior:"smooth"})}catch(d){window.scrollTo(0,a)}i.style.transition="background-color 0.3s ease",i.style.backgroundColor="var(--bg-hover)",setTimeout(()=>{i.style.backgroundColor=""},800)})})});
